# Chapter 07: PDO - Narration Script
# Format: duration|URL|text
# Pronunciation: Use spaces for acronyms (P D O, S Q L, C R U D)

# --- Hook ---
6|http://localhost:8080/07-PDO/public/index.php|Adding persistent storage. Chapter Seven introduces P D O and SQLite for database-driven content.

# --- Introduction ---
7|http://localhost:8080/07-PDO/public/index.php|This is also the first chapter to use shared library code. The app slash lib folder contains reusable components.

# --- Live Demo: Dynamic Navigation ---
5|http://localhost:8080/07-PDO/public/index.php|Home page content comes from the database. Notice navigation is built dynamically from page records.
5|http://localhost:8080/07-PDO/public/index.php?o=Contact|Click Contact. This page is stored in the database, not hardcoded in P H P files.
5|http://localhost:8080/07-PDO/public/index.php?o=Blog|Visit the Blog. Posts are listed with excerpts, dates, and author information.

# --- Live Demo: Blog CRUD ---
5|http://localhost:8080/07-PDO/public/index.php?o=Blog&edit|Click Manage Posts. The edit view shows all content types: posts, pages, and docs.
5|http://localhost:8080/07-PDO/public/index.php?o=Blog&m=create|Create a new post. Title, slug, icon selector, type, and Markdown content fields.
5|http://localhost:8080/07-PDO/public/index.php?o=Blog&edit|After saving, a flash message confirms success. The post appears in the listing.
5|http://localhost:8080/07-PDO/public/index.php?o=Blog&m=read&id=1|Read a post. Markdown content renders as formatted H T M L with the prose class.

# --- Live Demo: Session Persistence ---
5|http://localhost:8080/07-PDO/public/index.php?t=TopNav|Select TopNav theme. Session features from Chapter Six still work perfectly.
5|http://localhost:8080/07-PDO/public/index.php?o=Blog|Navigate to Blog. Theme persists without appearing in the U R L.

# --- Shared Library ---
7|https://github.com/markc/spe/blob/main/app/lib/Db.php#L11-L17|The D b class extends P D O. It auto-creates SQLite databases and provides C R U D methods.
7|https://github.com/markc/spe/blob/main/app/lib/Db.php#L9|Query Type enum defines fetch modes. All for arrays, One for single row, Col for single value.
6|https://github.com/markc/spe/blob/main/app/lib/Db.php#L40-L48|Create method builds insert query from array keys. Returns the new record I D.
6|https://github.com/markc/spe/blob/main/app/lib/Db.php#L50-L62|Read method accepts table, columns, where clause, parameters, and query type.

# --- Ctx with Database ---
7|https://github.com/markc/spe/blob/main/07-PDO/src/Core/Ctx.php#L6|Ctx imports D b and Query Type from the shared library namespace S P E App.
7|https://github.com/markc/spe/blob/main/07-PDO/src/Core/Ctx.php#L28-L33|Database initializes in constructor. Navigation builds from pages in the posts table.

# --- Init Dispatch ---
7|https://github.com/markc/spe/blob/main/07-PDO/src/Core/Init.php#L16-L21|Blog plugin handles o equals Blog. Model runs the method, View renders the result.
7|https://github.com/markc/spe/blob/main/07-PDO/src/Core/Init.php#L22-L26|Other routes query the database for pages. Found pages render, missing pages show error.

# --- Blog Model ---
7|https://github.com/markc/spe/blob/main/07-PDO/src/Plugins/Blog/BlogModel.php#L17-L19|Slug generator uses the pipe operator. Lowercase, replace non-alphanumeric, trim dashes.
7|https://github.com/markc/spe/blob/main/07-PDO/src/Plugins/Blog/BlogModel.php#L21-L35|Create method processes P O S T data. Flash message confirms, then redirect to edit listing.

# --- Blog View ---
7|https://github.com/markc/spe/blob/main/07-PDO/src/Plugins/Blog/BlogView.php#L7|Blog View imports Util from shared library for Markdown parsing and text excerpts.
6|https://github.com/markc/spe/blob/main/07-PDO/src/Plugins/Blog/BlogView.php#L40-L42|Util md converts Markdown to H T M L. Util excerpt extracts preview text from content.

# --- Conclusion ---
6|http://localhost:8080/07-PDO/public/index.php|That's Chapter Seven. P D O database access, shared libraries, and dynamic content management.
5|http://localhost:8080/07-PDO/public/index.php|Next chapter adds user authentication with login, registration, and access control.
